#!/usr/bin/env ruby
$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')
require 'optparse'
require 'bluepill'

controller = Bluepill::Controller.new()

options = {}
options[:application] = ARGV.shift if controller.list.include?(ARGV.first)
options[:application] ||= 'all'

options[:command] = ARGV.shift
options[:command_args] = ARGV

OptionParser.new do |opts|
  opts.banner = "Usage: bluepill [app] cmd [options]"
end.parse!

puts options.inspect
puts controller.send_cmd('applcation', options[:command])
